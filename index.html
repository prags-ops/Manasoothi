  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Manasoothi ‚Äì Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
  transition: background-color 0.25s ease, color 0.25s ease;
}

      :root {
  --glass-bg: rgba(255, 255, 255, 0.55);
  --glass-strong: rgba(255, 255, 255, 0.65);

  --glass-border: rgba(255, 255, 255, 0.35);
  --text-color: #4e6a6d;
  --shadow-color: rgba(0, 0, 0, 0.18);
}

       body.dark-mode {
  --glass-bg: rgba(22, 24, 26, 0.9);        /* VERY DARK boxes */
  --glass-strong: rgba(18, 20, 22, 0.96);  /* Header/footer almost solid */

  --glass-border: rgba(255, 255, 255, 0.12);
  --text-color: #e8f1f1;
  --shadow-color: rgba(0, 0, 0, 0.85);
}

    body {
      min-height: 100vh;
      font-family: "Poppins", sans-serif;
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0;
      background: url('image.jpg') no-repeat center center fixed;
      background-size: cover;
    }
      body.dark-mode {
        background-blend-mode: overlay;
      }
      body.dark-mode .login-container,
      body.dark-mode .login-modal,
      body.dark-mode .cookie-banner {
        background: rgba(40, 53, 59, 0.6);
        color: #e8f1f1;
      }


    .login-container {
    background: rgba(255, 255, 255, 0.55);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    animation: slideUpMain 1s ease-out forwards;
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.2);
    border-radius: 20px;
    padding: 3.5rem 2.4rem 2.7rem;
    text-align: center;
    max-width: 400px;
    width: 98vw;
  }
  @keyframes slideUpMain {
    0% {
      transform: translateY(120px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

      .logo-img {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        object-fit: cover;
        background: #e6fffa;
        margin-bottom: 1.2rem;
        box-shadow: 0 4px 28px var(--shadow-color);
        border: 3px solid var(--primary-dark);
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      .app-name {
        font-family: "Noto Sans Devanagari", Arial, sans-serif;
        font-size: 2.1rem;
        font-weight: 700;
        color: var(--primary-dark);
        margin-bottom: 0.7rem;
      }
      .main-title {
        font-size: 1rem;
        opacity: 0.9;
        margin-bottom: 1.3rem;
      }
      .login-btn {
  display: inline-block;
  background: var(--primary);
  color: rgb(65, 63, 63);
  border: none;
  border-radius: 50px;
  padding: 12px 32px;
  font-size: 1.12rem;
  font-weight: 600;
  letter-spacing: 0.4px;
  margin: 2.1rem 0 1.4rem 0;
  cursor: pointer;

  /* IMPORTANT */
  transition: 
    background-color 0.25s ease,
    box-shadow 0.25s ease,
    transform 0.15s ease;

  box-shadow: 0 2px 12px var(--shadow-color);
}

      .login-btn:hover {
  transform: translateY(-3px);
}
/* LIGHT MODE */
body:not(.dark-mode) .login-btn:hover {
  background: var(--primary-dark);
  box-shadow: 0 12px 26px rgba(0, 0, 0, 0.35);
}

/* DARK MODE */
body.dark-mode .login-btn:hover {
  background: #1f2b2a; /* visibly darker */
  box-shadow: 0 16px 35px rgba(0, 0, 0, 0.9);
}
.login-btn:active {
  transform: translateY(0) scale(0.97);
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.6);
}



      .dark-mode-toggle {
        position: absolute;
        top: 36px;
        right: 36px;
        background: none;
        border: none;
        color: var(--primary-dark);
        font-size: 1.5rem;
        cursor: pointer;
        z-index: 10;
      }
      @media (max-width: 500px) {
        .login-container {
          padding: 1.7rem 0.7rem;
        }
      }
      .modal-bg {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: rgba(28, 53, 60, 0.74);
        z-index: 99;
        display: none;
        align-items: center;
        justify-content: center;
      }
      .modal-bg.active { display:flex; }
      .login-modal {
      background: rgba(255, 255, 255, 0.35);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-radius: 22px;
      border: 1px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.35);
      padding: 2.5rem 2.2rem 2rem;
      color: #0f2f2d;
    }
      .login-backdrop {
        background: rgba(10, 30, 35, 0.45);
        backdrop-filter: blur(3px);
      }
      .modal-close {
        position: absolute;
        right: 18px; top: 18px;
        cursor: pointer;
        font-size: 1.3rem;
        color: #999;
      }
      .modal-close:hover { color: var(--primary-dark); }
      .login-form, .signup-form {
        display: none;
        text-align: left;
      }
      .login-form.active, .signup-form.active { display:block; }
      .login-form label, .signup-form label {
        font-size: 0.98rem;
        margin: 8px 0 6px;
        display: block;
      }
      .login-form input, .signup-form input {
        background: rgba(255, 255, 255, 0.65);
        border: 1.4px solid var(--primary-dark);
        border-radius: 6px;
        width: 100%;
        font-size: 1rem;
        padding: 0.7rem;
        margin-bottom: 1rem;
        outline: none;
        box-sizing: border-box;
      }
     /* FORM BUTTONS - Login / Signup */
.login-form button, .signup-form button {
  background: var(--primary);
  color: rgb(242, 236, 236);
  border: none;
  border-radius: 24px;
  padding: 0.75rem 2rem;
  font-size: 1.1rem;
  font-weight: 600;
  width: 100%;
  margin-top: 0.5rem;
  cursor: pointer;

  /* IMPORTANT: transitions for hover + lift effect */
  transition:
    background-color 0.25s ease,
    box-shadow 0.25s ease,
    transform 0.15s ease;

  box-shadow: 0 4px 10px var(--shadow-color);
}

/* LIGHT MODE HOVER */
body:not(.dark-mode) .login-form button:hover,
body:not(.dark-mode) .signup-form button:hover {
  background: var(--primary-dark);
  box-shadow: 0 12px 26px rgba(0, 0, 0, 0.35);
  transform: translateY(-3px);
}

/* DARK MODE HOVER */
body.dark-mode .login-form button:hover,
body.dark-mode .signup-form button:hover {
  background: #1f2b2a; /* darker for dark mode */
  box-shadow: 0 16px 35px rgba(0, 0, 0, 0.9);
  transform: translateY(-3px);
}

/* CLICK FEEDBACK */
.login-form button:active,
.signup-form button:active {
  transform: translateY(0) scale(0.97);
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.6);
}

      .login-form button:hover, .signup-form button:hover {
        background: var(--primary-dark);
      }
      .form-footer {
        text-align: center;
        margin-top: 10px;
        font-size: 0.95rem;
        color: var(--primary-dark);
      }
      .form-footer a {
        cursor: pointer;
        text-decoration: underline;
        color: var(--primary-dark);
      }
      .login-error {
        color: red;
        font-size: 0.85rem;
        margin-top: 0.4rem;
      }

      /* Cookie Banner Styles */
      .cookie-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.35);
        backdrop-filter: blur(2px);
        z-index: 999;
        display: none;
        animation: fadeInBackdrop 0.4s ease-in-out;
      }

      .cookie-backdrop.active {
        display: block;
      }
      .cookie-banner {
      position: fixed;
      bottom: 50%;
      left: 50%;
      transform: translate(-50%, 50%);

      background: rgba(255, 255, 255, 0.58);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);

      border-radius: 18px;
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.25);

      padding: 2rem;
      max-width: 420px;
      width: 90vw;
      z-index: 1001;
      display: none;
          animation: popInCookie 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

      .cookie-banner.active {
        display: block;
      }

      .cookie-wrapper {
        display: flex;
        gap: 1.2rem;
        align-items: flex-start;
        margin-bottom: 1.5rem;
      }

      .cookie-icon {
        font-size: 2.5rem;
        animation: bounceCookie 0.6s ease-in-out 0.5s;
      }

      .cookie-content h3 {
        margin: 0 0 0.6rem 0;
        color: var(--primary-dark);
        font-size: 1.2rem;
      }

      .cookie-message {
        margin: 0;
        font-size: 0.95rem;
        color: #445;
        line-height: 1.4;
      }

      .cookie-buttons {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
      }

      .cookie-accept {
        background: rgba(255, 255, 255, 0.15);
        border: none;
        color: rgb(255, 255, 255);
        padding: 0.75rem 1.8rem;
        border-radius: 24px;
        cursor: pointer;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(88, 90, 90, 0.3);
        transition: all 0.3s ease;
      }

      .cookie-accept:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(196, 193, 193, 0.947);
      }
      .cookie-reject {
        background:  rgba(255, 255, 255, 0.15);
        border: none;
        color: rgb(255, 255, 255);
        padding: 0.75rem 1.8rem;
        border-radius: 24px;
        cursor: pointer;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(64, 75, 74, 0.3);
        transition: all 0.3s ease;
      }

      .cookie-reject:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(196, 193, 193, 0.947);
      }
      @keyframes popInCookie {
        from {
          opacity: 0;
          transform: translate(-50%, 50%) scale(0.5);
        }
        to {
          opacity: 1;
          transform: translate(-50%, 50%) scale(1);
        }
      }

      @keyframes bounceCookie {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      @keyframes fadeInBackdrop {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @media (max-width: 500px) {
        .cookie-banner {
          padding: 1.5rem;
          max-width: 95vw;
        }

        .cookie-buttons {
          flex-direction: column;
          gap: 0.8rem;
        }

        .cookie-reject,
        .cookie-accept {
          width: 100%;
        }
      }
      /* Cookie text color fix for DARK MODE only */
        body.dark-mode .cookie-banner .cookie-message {
          color: #e8f1f1;   /* light readable text */
        }

        /* Optional: heading clarity in dark mode */
        body.dark-mode .cookie-banner h3 {
          color: #ffffff;
        }
        body:not(.dark-mode) .cookie-accept {
          background: #354745;   /* soft teal */
          color: #ffffff;
        }

        body:not(.dark-mode) .cookie-reject {
          background: #354745;  /* soft grey */
          color: #ffffff;
        }
        body.dark-mode .login-btn{
          color: #e8f1f1;
        }

/* DARK MODE ‚Äì stronger glow */
body.dark-mode .login-btn:hover {
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.8);
}

/* LIGHT MODE ‚Äì softer glow */
body:not(.dark-mode) .login-btn:hover {
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.25);
}

      </style>
      </head>
      <body>
      <button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode">üåô</button>
      <div class="login-container">
        <img src="image2.jpg" alt="Manasoothi logo" class="logo-img" />
        <div class="app-name"><span class="devanagari">‡§Æ‡§®‡§∏‡•Ç‡§•‡§ø</span> Manasoothi</div>
        <div class="main-title">Your holistic companion for good mental health and support.</div>
          <button class="login-btn" id="mainLoginBtn">Login to Continue</button>
        </div>

    <!-- Cookie Banner Modal -->
    <div class="cookie-backdrop" id="cookieBackdrop"></div>
    <div class="cookie-banner" id="cookieBanner">
      <div class="cookie-wrapper">
        <div class="cookie-icon">üç™</div>
        <div class="cookie-content">
          <h3>Cookie Consent</h3>
          <p class="cookie-message">We use cookies to enhance your experience and save your preferences.</p>
        </div>
      </div>
      <div class="cookie-buttons">
        <button class="cookie-reject" id="rejectCookies">Reject All</button>
        <button class="cookie-accept" id="acceptCookies">Accept All</button>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal-bg" id="loginModalBg">
      <div class="login-modal" id="loginModal">
        <div class="modal-close" id="modalClose">&times;</div>

        <!-- User Login Form -->
        <form id="userLoginForm" class="login-form">
          <h3>User Login</h3>
          <label for="userEmail">Email</label>
          <input type="email" id="userEmail" required />
          <label for="userPassword">Password</label>
          <input type="password" id="userPassword" required />
          <button type="submit">Login</button>
          <div id="userLoginError" class="login-error"></div>
          <div class="form-footer">
            Don't have an account? <a id="showSignupLink">Sign Up</a>
            <br/>
            Or <a id="switchToAdminLogin">Admin Login</a>
          </div>
        </form>

        <!-- Admin Login Form -->
        <form id="adminLoginForm" class="login-form">
          <h3>Admin Login</h3>
          <label for="adminEmail">Email</label>
          <input type="email" id="adminEmail" required />
          <label for="adminPassword">Password</label>
          <input type="password" id="adminPassword" required />
          <button type="submit">Login</button>
          <div id="adminLoginError" class="login-error"></div>
          <div class="form-footer">
            Back to <a id="switchToUserLogin">User Login</a>
          </div>
        </form>

        <!-- Signup Form -->
        <form id="signupForm" class="signup-form">
          <h3>User Sign Up</h3>
          <label for="signupName">Name</label>
          <input type="text" id="signupName" required />
          <label for="signupEmail">Email</label>
          <input type="email" id="signupEmail" required />
          <label for="signupPassword">Password</label>
          <input type="password" id="signupPassword" required />
          <button type="submit">Register</button>
          <div id="signupError" class="login-error"></div>
          <div class="form-footer">
            Already have an account? <a id="backToLoginLink">Login here</a>
          </div>
        </form>

      </div>
    </div>

    <script>
      // Dark mode toggle
      document.getElementById("darkModeToggle").onclick = function () {
        document.body.classList.toggle("dark-mode");
      };

      const loginModalBg = document.getElementById("loginModalBg");
      const mainLoginBtn = document.getElementById("mainLoginBtn");
      const modalClose = document.getElementById("modalClose");

      const userLoginForm = document.getElementById("userLoginForm");
      const adminLoginForm = document.getElementById("adminLoginForm");
      const signupForm = document.getElementById("signupForm");
      const userLoginError = document.getElementById("userLoginError");
      const adminLoginError = document.getElementById("adminLoginError");
      const signupError = document.getElementById("signupError");
      
      window.onload = function () {
      const consent = localStorage.getItem("cookieConsent");
        if (!consent) {
          showCookieBanner();
        }
      };
      // Example: respect cookie consent (for future analytics)
      if (localStorage.getItem("cookieConsent") === "accepted") {
        console.log("Cookies accepted: analytics can be enabled");
      } else {
        console.log("Cookies rejected: analytics disabled");
      }

      mainLoginBtn.onclick = () => {
        loginModalBg.classList.add("active");
        showUserLogin();
        clearErrors();
      };

      modalClose.onclick = () => {
        loginModalBg.classList.remove("active");
      };

      loginModalBg.onclick = (e) => {
        if (e.target === loginModalBg) loginModalBg.classList.remove("active");
      };

      // Show forms helpers
      function showUserLogin() {
        userLoginForm.classList.add("active");
        adminLoginForm.classList.remove("active");
        signupForm.classList.remove("active");
        clearErrors();
      }
      function showAdminLogin() {
        adminLoginForm.classList.add("active");
        userLoginForm.classList.remove("active");
        signupForm.classList.remove("active");
        clearErrors();
      }
      function showSignup() {
        signupForm.classList.add("active");
        userLoginForm.classList.remove("active");
        adminLoginForm.classList.remove("active");
        clearErrors();
      }
      function clearErrors() {
        userLoginError.textContent = "";
        adminLoginError.textContent = "";
        signupError.textContent = "";
      }

      // Switch links handlers
      document.getElementById("showSignupLink").onclick = showSignup;
      document.getElementById("backToLoginLink").onclick = showUserLogin;
      document.getElementById("switchToAdminLogin").onclick = showAdminLogin;
      document.getElementById("switchToUserLogin").onclick = showUserLogin;

userLoginForm.onsubmit = async function(e) {
  e.preventDefault();
  const email = document.getElementById("userEmail").value.trim();
  const password = document.getElementById("userPassword").value;

  if (!email || !password) {
    userLoginError.textContent = "Please enter credentials.";
    return;
  }

 try {
  const res = await fetch("http://localhost:3000/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  });

  const contentType = res.headers.get("content-type");

  if (contentType && contentType.indexOf("application/json") !== -1) {
    const data = await res.json();
    if (res.ok) {
      alert(data.message);
      localStorage.setItem("isLoggedIn", "true");
      showCookieBanner();
    } else {
      userLoginError.textContent = data.message || "Login failed";
    }
  } else {
    // This catches the "Unexpected token <" error before it crashes
    const text = await res.text();
    console.error("Server returned non-JSON:", text);
    userLoginError.textContent = "Server error: Received HTML instead of JSON.";
  }
} catch (err) {
  userLoginError.textContent = "Connection Error: " + err.message;
}
};
adminLoginForm.onsubmit = function (e) {
        e.preventDefault();
        let email = document.getElementById("adminEmail").value.trim();
        let pass = document.getElementById("adminPassword").value;
        if (!email || !pass) {
          adminLoginError.textContent = "Please enter credentials.";
          return;
        }
        alert("Admin login successful (demo mode).");
        loginModalBg.classList.remove("active");
        window.location.href = "admin.html";
      };

      // Simulated signup
signupForm.onsubmit = async function(e) {
  e.preventDefault();
  const name = document.getElementById("signupName").value.trim();
  const email = document.getElementById("signupEmail").value.trim();
  const password = document.getElementById("signupPassword").value;

  if (!name || !email || !password) {
    signupError.textContent = "All fields are required.";
    return;
  }

  try {
    const res = await fetch("http://localhost:3000/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, email, password })
    });

    const data = await res.json();
    if (res.ok) {
      alert("Registration successful! Please login.");
      showUserLogin();
    } else {
      signupError.textContent = data.message || "Signup failed";
    }
  } catch (err) {
    signupError.textContent = "Error: " + err.message;
  }
};
      const cookieBanner = document.getElementById("cookieBanner");
      const cookieBackdrop = document.getElementById("cookieBackdrop");
      const acceptCookiesBtn = document.getElementById("acceptCookies");
      const rejectCookiesBtn = document.getElementById("rejectCookies");

      function showCookieBanner() {
        cookieBackdrop.classList.add("active");
        cookieBanner.classList.add("active");
      }

      function hideCookieBanner() {
        cookieBackdrop.classList.remove("active");
        cookieBanner.classList.remove("active");
      }

      acceptCookiesBtn.onclick = function () {
  localStorage.setItem("cookieConsent", "accepted");
  hideCookieBanner();

  if (localStorage.getItem("isLoggedIn")) {
    window.location.href = "home.html";
  }
};

rejectCookiesBtn.onclick = function () {
  localStorage.setItem("cookieConsent", "rejected");
  hideCookieBanner();

  if (localStorage.getItem("isLoggedIn")) {
    window.location.href = "home.html";
  }
};

    </script>
  </body>
  </html>  